<h1> <%= @sub.title %> </h1>
<h2>Moderated by <%= @sub.moderator.username %></h2>

<%= @sub.description %>

<%= link_to 'Back to all subs', subs_url %>
<% if @sub.moderator == current_user %>
  <%= link_to 'Edit Sub', edit_sub_url(@sub) %>
<% end %>

<% @sub.posts.each do |post| %>
  <%= "#{post.title} by #{post.author.username}" %>
  <%= post.url %>
  <%= post.content %>
  <% if current_user == post.author %>
    <%= link_to 'Edit post', "/subs/#{@sub.id}/posts/#{post.id}/edit" %>
    <%= button_to 'Delete post', "/subs/#{@sub.id}/posts/#{post.id}", method: :delete %>
  <% end %>
<% end %>


<h3>Add post</h3>

<form class="" action="<%= sub_posts_url(@sub) %>" method="post">
  <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
  <input type="hidden" name="post[sub_id]" value="<%= @sub.id %>">
  <label>Title:
    <input type="text" name="post[title]">
  </label>
  <label>URL (optional):
    <input type="text" name="post[url]">
  </label>
  <label>Content:
    <textarea name="post[content]" rows="8" cols="80"></textarea>
  </label>

  <input type="submit" name="" value="Create Post">

</form>
